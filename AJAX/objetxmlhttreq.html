<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax</title>
</head>

<body>
    <h1>Ajax:Async Javascript & Xml</h1>
    <p>Il faut savoir que la différence entre une requête synchrone et une requête asynchrone, est que par exemple quand
        on rafraîchit une page web, alors on fait une requête synchrone cad qu'on va quitter la page et y revenir . par
        contre une requête asynchrone nous permet de ne pas quitter la page web , au même temps récupérer des données
        sur le serveur .</p>
    <p>Autre information ; c'est que la requête get apparaît dans les url et les requêtes post sont masquées</p>
    <div id="demo">

    </div>
    <script>
        let std = document.getElementById('demo');
        let xhr = new XMLHttpRequest()

        xhr.onreadystatechange = function () {
            console.log(this); // affichage des 4 stats
            if (this.readyState == 4 && this.status == 200) {
                // std.innerHTML = this.responseText;
                // console.log(this.response);
                let utilisateurs = this.response.utilisateurs;
                // console.log(utilisateurs)
                for (let i = 0; i < utilisateurs.length; i++) {
                    std.innerHTML += `<h1>${utilisateurs[i].prénom} agé de  ( ${utilisateurs[i].age} ans)</h1> `;
                    ;
                    console.log(utilisateurs[i])
                }
            }
            else if (this.readyState == 4 && this.status == 404) {
                std.innerHTML = "Error 404"
            }
        }

        xhr.open('GET', '../Ajax/data.json', true)
        xhr.responseType = "json"
        xhr.send()


    </script>

</body>

</html>